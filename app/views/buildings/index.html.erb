<div class="container">
  <div class="panel">
    <% if @buildings.size == 0 %>
    <div class="panel-heading">
      <h1>ساختمانی برای حساب کاربری شما یافت نشد</h1>
    </div>
    <div class="panel-body">
      <br>

      <%= link_to 'ایجاد ساختمان', new_building_path, :class => 'btn btn-success' %>
    </div>
    <% elsif @buildings.size == 1 %>
    <% building = @buildings.first %>
    <div class="panel-heading">
      <h1>ساختمان شما</h1>
    </div>
    <div class="panel-body">

      <p>
        <strong>تعداد طبقات:</strong>
        <%= building.floor_cnt %>
      </p>

      <p>
        <strong>تعداد واحد:</strong>
        <%= building.units_cnt %>
      </p>

      <p>
        <strong>دیگر مشخصات:</strong>
        <%= building.general_info %>
      </p>
      <br/>
      
      <div class="table-responsive">
        <table class="table table-success table-condensed table-striped table-bordered table-hover">
          <thead>
            <tr>
              <th style="width:10%;">کاربر</th>
              <th style="width:10%;">ساختمان</th>
              <th style="width:10%;">طبقه</th>
              <th style="width:10%;">شماره واحد</th>
              <th style="width:15%;">جهت مکانی</th>
              <th style="width:15%;">مساحت</th>
              <th style="width:10%;">تعداد ساکنین</th>
              <th style="width:20%;"></th>
            </tr>
          </thead>
          <tbody>
            <% @units = @building.units %>
            <% @units.each do |unit| %>
            <tr>
              <th><%= unit.user_id %></th>
              <th><%= unit.building_id %></th>
              <th><%= unit.floor_number %></th>
              <th><%= unit.unit_number %></th>
              <th><%= unit.side %></th>
              <th><%= unit.area %></th>
              <th><%= unit.resident_count %></th>
              <th class="center"><%= link_to t('Edit'), edit_unit_path(unit), :class => 'btn btn-primary' %>&nbsp;&nbsp;&nbsp;&nbsp;<%= link_to t('Destroy'), unit, method: :delete, data: { confirm: 'آیا مطمئن هستید؟' }, :class => 'btn btn-danger' %></th>
            </tr>
            <% end %>
          </tbody>
        </table>
      </div>
      <br/>
      <%= link_to t('Show'), building %>
      <br>
      <%= link_to t('Edit'), edit_building_path(building) %>
      <br>
      <%= link_to t('Destroy'), building, method: :delete, data: { confirm: 'آیا مطمئن هستید؟' } %>
      <br>
      <%= link_to 'واحد جدید برای این ساختمان', new_unit_path(building_id: building.id) %>
      <br/>
      <%= link_to 'مشاهده هزینه ها', expenses_path(building_id: building.id) %>
      <br/>
      <%= link_to 'مشاهده پلان های هزینه', plans_path(building_id: building.id) %>
      <br>
      <br>
    </div>
    <% else %>
    <div class="panel-heading">
      <h1>لیست ساختمانها</h1>
    </div>
    <div class="panel-body">
      <div class="table-responsive">
        <table class="table table-hover">
          <thead>
            <tr>
              <th>تعداد طبقات</th>
              <th>تعداد واحد</th>
              <th>دیگر اطلاعات</th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
            </tr>
          </thead>

          <tbody>
            <% @buildings.each do |building| %>
              <tr>
                <td><%= building.floor_cnt %></td>
                <td><%= building.units_cnt %></td>
                <td><%= building.general_info %></td>
                <td><%= link_to t('Show'), building %></td>
                <td><%= link_to t('Edit'), edit_building_path(building) %></td>
                <td><%= link_to t('Destroy'), building, method: :delete, data: { confirm: 'Are you sure?' } %></td>
                <td><%= link_to 'واحد جدید برای این ساختمان', new_unit_path(building_id: building.id) %>
                <td><%= link_to 'مشاهده هزینه ها', expenses_path(building_id: building.id) %></td>
                <td><%= link_to 'مشاهده پلان های هزینه', plans_path(building_id: building.id) %></td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>
    <% end %>
  </div>
</div>
